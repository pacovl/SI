{% extends 'layout.html' %}

{% block title %}
Detalle - BigLemon
{% endblock %}

{% block izquierda %}
<div class="side_menu">
    <div class="flex-container-vertical">
        <!--Clase para la búsqueda-->
        <div>
            <form action="/" method="POST">
                <input name="buscar" type="text" placeholder="Busca..">
                <input name="boton" type="submit" value="Buscar">
            </form>
        </div>

        <!--Clase con la lista desplegable de categorías-->
        <div class="categories">
            <p>¡Busca tu categoría favorita!</p>
            <div class="lista_desplegable">
                <select>
                    <option value="drama">Drama</option>
                    <option value="animacion">Animación</option>
                    <option value="policiaca">Policíaca</option>
                    <option value="espacio">Espacio</option>
                    <option value="ciencia ficcion">Ciencia ficción</option>
                    <option value="infantil">Infantil</option>
                    <option value="aventura">Aventura</option>
                </select>
            </div>
        </div>

        <!--Clase para el botón de login-->
        {% if user_id %}
        <div class="login_button">
          <p>¡Acceda a su Historial!</p>
          <form style="display: inline" action="/historial/" method="POST">
            <input name="historial" type="submit" value="Historial">
          </form>
          <p> </p>
        <form style="display: inline" action="/" method="POST">
          <input name="logout" type="submit" value="LOGOUT">
        </form>
        </div>
        {% else %}
        <div class="login_button">
          <p>¡Inicie sesión para comprar!</p>
        <form style="display: inline" action="/detalle" method="POST">
          <input type="hidden" name="peli" value={{seleccion.titulo}}>
          <!-- <p>Nombre de usuario:</p> -->
          <input name="username" type="text" placeholder="Nombre de usuario">
          <!-- <p>Contraseña:</p> -->
          <input name="password" type="password" placeholder="Contraseña">
          <p></p>

          <input type="submit" value="LOGIN">
        </form>

        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block derecha %}
<div class="flex-container">

    <div class="Vertical">
        <div class="Titulo_peli">
            <p>{{ seleccion.titulo }}</p>
        </div>
        <div class="Miniatura">
            <!-- <a href="../details_logged.html" target="_parent"> -->
            <img src=../static/{{seleccion.poster}} alt="Imagen de {{seleccion.titulo}}" width=250 height=300>
            </a>
        </div>
        <div class="Puntuacion">
            <img src="../static/imgs/puntuacion.png" alt="Estrellas como puntuacion" width=250 height=50>
        </div>
    </div>

    <div class="Vertical">
        <div class="Descripcion">
            <p>
                <b>Resumen: </b>{{ seleccion.desc }}<br>
                <b>Año: </b>{{ seleccion.anno }}<br>
                <b>Actores: </b>
                {% for actor in seleccion.actores %}
                <li>{{ actor.nombre }} ({{ actor.personaje }})</li>
                {% endfor %}
                <br>
                <b>Director: </b>{{ seleccion.director }}<br>
            </p>
        </div>

        <div class="centro">
            <!-- <form action="/detalle" action="{{url_for('detalle', pelicula=seleccion.titulo)}}">
                <input type="hidden" name="pelicula" value="{{seleccion.titulo}}">
                <input class="Boton Boton1" name="anade" type="submit" value="¡Añádeme al carrito!">
            </form> -->
            <a href="{{url_for('adicion', id=seleccion.id)}}">
                <button class="Boton Boton1">
                Añádeme al carrito ( {{ seleccion.precio }} €)
                </button>
            </a>
        </div>
    </div>

</div>

<div>
    <p class="centro">Recomendadas</p>
</div>

<div class="flex-container">
    {% for peli in recomendadas %}
    <div class="portada">
        <a href="{{url_for('detalle', pelicula=peli.titulo)}}" target="_parent">
            <img src="static/{{peli.poster}}" alt="portada de {{peli.titulo}}" width="200px" height="250px">
            <div class="overlay">
                <div class="descPortada">
                    {% if peli.desc|length < 200 %} 
                    <b>{{peli.desc}}</b>
                    {% else %}
                    <b>{{peli.desc[:198] + '...'}}</b>
                    {% endif %}
                </div>
            </div>
        </a>
    </div>
    {% endfor %}
</div>

<div class="flex-container">
    <div>
        <button class="scroll_boton">Anterior</button>
    </div>
    <div>
        <button class="scroll_boton">Siguiente</button>
    </div>
</div>
{% endblock %}